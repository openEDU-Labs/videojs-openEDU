/*! videojs-openedu - v0.1.5 - 2015-12-01
* Copyright (c) 2015 Richard Wendel; Licensed Apache-2.0 */
!function(a){"use strict";var b,c,d,e=[],f=0,g=function(a){c=JSON.parse(a),b=this,h(c.breakpoints),b.on("timeupdate",i)};a.plugin("openEDU",g);var h=function(a){for(var b=0;b<a.length;b++)e.push(a[b]),e[b].inProgress=!1,e[b].completed=!1,b>0?e[b].lastBreak=e[b-1].breakpoint:e[b].lastBreak=0},i=function(){var a=b.currentTime();console.log(a),f<e.length&&e[f].breakpoint<a&&(e[f].inProgress||(console.log("breakpoint reached"),console.log(e[f]),e[f].inProgress=!0,j()))},j=function(){l(),m(),void 0===d&&(d=p("div",{"class":"vjs-openEDU",style:"display:block"})),r(),o(e[f].fields,d),k(function(){n()})},k=function(a){$("#form").submit(function(b){b.preventDefault(),a()})},l=function(){for(var a=0,c=0;c<e.length;c++)if(!e[c].completed){a=c;break}f=a,b.currentTime(e[f].breakpoint)},m=function(){b.pause(),b.getChild("controlBar").hide()},n=function(){e[f++].completed=!0,b.play(),b.getChild("controlBar").show(),q()},o=function(a,b){a.forEach(function(a){var c=p(a.tag,a.attr,b);"object"==typeof a.content?o(a.content,c):c.innerHTML=a.content})},p=function(a,c,d){var e=document.createElement(a),f=d||b.el();return f.appendChild(e),Object.getOwnPropertyNames(c).forEach(function(a){"length"!==a&&"0"!==c[a]&&e.setAttribute(a,c[a])}),e},q=function(){$(d).css("display","none").html("")},r=function(){$(d).css("display","block")}}(window.videojs);